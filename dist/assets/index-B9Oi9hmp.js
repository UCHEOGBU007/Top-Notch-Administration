function e(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{a as r,j as t}from"./react-DrjyONFs.js";import{c as s}from"./react-dom-kFiQiEi0.js";import{u as n,B as a,R as o,a as i}from"./react-router-CCx1QAHa.js";import{A as c}from"./react-icons-DD6Iw2aN.js";import{c as d}from"./@supabase-dAjcSpDH.js";import"./scheduler-nLDBUfSY.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const l="_container_k8j4j_3",m="_header_k8j4j_23",h="_logo_k8j4j_31",u="_main_k8j4j_43",j="_form_k8j4j_55",p="_title_k8j4j_79",x="_label_k8j4j_95",_="_input_k8j4j_111",f="_button_k8j4j_131",g=()=>{const[e,s]=r.useState(""),[a,o]=r.useState(""),i=n();return t.jsxs("div",{className:l,children:[t.jsx("header",{className:m,children:t.jsx("img",{src:"/Logo.jpg",alt:"Top Notch Logo",className:h})}),t.jsx("main",{className:u,children:t.jsxs("form",{className:j,onSubmit:r=>{r.preventDefault();"topnotchadmin"===e&&"securepass2025"===a?i("/Admin"):alert("Invalid credentials. Please try again.")},children:[t.jsx("h2",{className:p,children:"Admin Login"}),t.jsx("label",{htmlFor:"username",className:x,children:"Username :"}),t.jsx("input",{type:"text",id:"username",name:"username",required:!0,className:_,placeholder:"Enter your username",value:e,onChange:e=>s(e.target.value)}),t.jsx("label",{htmlFor:"password",className:x,children:"Password :"}),t.jsx("input",{type:"password",id:"password",name:"password",required:!0,className:_,placeholder:"Enter your password",value:a,onChange:e=>o(e.target.value)}),t.jsx("button",{type:"submit",className:f,children:"Login"})]})})]})},b={reservationSection:"_reservationSection_r2690_25",dashboardMain:"_dashboardMain_r2690_39",dashboardHeader:"_dashboardHeader_r2690_55",statsContainer:"_statsContainer_r2690_83",statCard:"_statCard_r2690_95",confirmedCardBorder:"_confirmedCardBorder_r2690_139",pendingCardBorder:"_pendingCardBorder_r2690_145",iconWrapper:"_iconWrapper_r2690_153",confirmedIcon:"_confirmedIcon_r2690_181",pendingIcon:"_pendingIcon_r2690_193",reservationStatistics:"_reservationStatistics_r2690_205",searchForm:"_searchForm_r2690_237",searchInput:"_searchInput_r2690_249",searchButton:"_searchButton_r2690_279",tableWrapper:"_tableWrapper_r2690_303",reservationTable:"_reservationTable_r2690_321",tableHeader:"_tableHeader_r2690_333",tableBody:"_tableBody_r2690_357",confirmedStatusText:"_confirmedStatusText_r2690_389",pendingStatusText:"_pendingStatusText_r2690_399",confirmButton:"_confirmButton_r2690_409",deleteButton:"_deleteButton_r2690_411",confirmPending:"_confirmPending_r2690_435",confirmConfirmed:"_confirmConfirmed_r2690_445"},v=d("https://repwkoonlksjykppcqgw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlcHdrb29ubGtzanlrcHBjcWd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwNTE2MzYsImV4cCI6MjA3MDYyNzYzNn0.vTY2R768jCgkX53s1QPlF2DDmn_G5lKHzRxjzkUHBcc"),y=e=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[t.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),N=e=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("polyline",{points:"12 6 12 12 16 14"})]}),w=()=>{const[e,s]=r.useState([]),[n,a]=r.useState(""),[o,i]=r.useState({confirmed:0,pending:0}),[c,d]=r.useState(!1),[l,m]=r.useState(""),[h,u]=r.useState({});r.useEffect(()=>{j()},[]);const j=async()=>{d(!0),m("");try{const{data:e,error:r}=await v.from("top_notch_reservations").select("*");if(r)console.error("Error fetching reservations:",r),m("Failed to load reservations."),s([]),i({confirmed:0,pending:0});else{const r=Array.isArray(e)?e:[];s(r);const t=r.filter(e=>"confirmed"===e.status).length,n=r.length-t;i({confirmed:t,pending:n})}}catch(e){console.error("Unexpected error:",e),m("Unexpected error occurred."),s([]),i({confirmed:0,pending:0})}finally{d(!1)}},p=r.useMemo(()=>{const r=n.trim().toLowerCase();return r?e.filter(e=>(e.name||"").toLowerCase().includes(r)):e},[e,n]);return t.jsxs("section",{className:b.reservationSection,children:[t.jsxs("main",{className:b.dashboardMain,children:[t.jsxs("section",{className:b.dashboardHeader,children:[t.jsx("h2",{children:"Manage Reservations"}),t.jsx("p",{children:"View and manage all reservations here."})]}),t.jsxs("div",{className:b.statsContainer,children:[t.jsx("article",{className:"".concat(b.statCard," ").concat(b.confirmedCardBorder),style:{borderLeft:"#10b981 100px solid"},children:t.jsxs("div",{className:b.statContent,children:[t.jsx("h3",{children:"Completed Reservations"}),t.jsxs("div",{className:"".concat(b.iconWrapper," ").concat(b.confirmedIcon),children:[t.jsx(y,{}),t.jsx("p",{style:{border:"none"},children:o.confirmed})]})]})}),t.jsx("article",{className:"".concat(b.statCard," ").concat(b.pendingCardBorder),style:{borderLeft:"#fbbf24 100px solid"},children:t.jsxs("div",{children:[t.jsx("h3",{children:"Pending Reservations"}),t.jsxs("div",{className:"".concat(b.iconWrapper," ").concat(b.pendingIcon),children:[t.jsx(N,{}),t.jsx("p",{style:{border:"none"},children:o.pending})]})]})})]})]}),t.jsxs("div",{className:b.reservationStatistics,children:[t.jsx("h2",{children:"Search Reservations"}),t.jsxs("form",{className:b.searchForm,onSubmit:e=>e.preventDefault(),children:[t.jsx("input",{type:"text",placeholder:"Search by name...",className:b.searchInput,value:n,onChange:e=>a(e.target.value)}),t.jsx("button",{type:"submit",className:b.searchButton,children:"Search"})]})]}),c?t.jsx("p",{className:b.loadingText,children:"Loading reservations..."}):l?t.jsx("p",{className:b.errorText,children:l}):t.jsx("div",{className:b.tableWrapper,children:t.jsxs("table",{className:b.reservationTable,children:[t.jsx("thead",{className:b.tableHeader,children:t.jsxs("tr",{className:b.tableRow,children:[t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Time"}),t.jsx("th",{children:"Email"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Telephone"}),t.jsx("th",{children:"Guest"}),t.jsx("th",{children:"Services"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Actions"})]})}),t.jsxs("tbody",{className:b.tableBody,children:[p.map(r=>t.jsxs("tr",{className:b.tableRow,children:[t.jsx("td",{children:r.name}),t.jsx("td",{children:r.time}),t.jsx("td",{children:r.email}),t.jsx("td",{children:r.date}),t.jsx("td",{children:r.phone||"N/A"}),t.jsx("td",{children:r.guests}),t.jsx("td",{children:r.occasion}),t.jsx("td",{className:"confirmed"===r.status?b.confirmedStatusText:b.pendingStatusText,children:r.status||"unconfirmed"}),t.jsx("td",{children:t.jsxs("div",{className:b.actionButtons,children:[t.jsx("button",{onClick:()=>(async e=>{if(e){u(r=>({...r,[e]:!0}));try{const{data:r,error:t}=await v.from("top_notch_reservations").update({status:"confirmed"}).eq("id",e).select();t?(console.error("Supabase update error (confirm):",t),alert("Unable to confirm reservation. Check console for details.")):r&&r.length>0?(s(t=>t.map(t=>t.id===e?{...t,...r[0]}:t)),await j()):await j()}catch(r){console.error("Unexpected error confirming reservation:",r),alert("Unexpected error. See console.")}finally{u(r=>({...r,[e]:!1}))}}})(r.id),disabled:"confirmed"===r.status||!!h[r.id],className:"confirmed"===r.status?"".concat(b.confirmButton," ").concat(b.confirmConfirmed):"".concat(b.confirmButton," ").concat(b.confirmPending),children:h[r.id]?"Processing...":"confirmed"===r.status?"Confirmed":"Confirm"}),t.jsx("button",{onClick:()=>(async r=>{if(!r)return;const t=e.find(e=>e.id===r);if(t)if("confirmed"!==t.status){if(window.confirm("Are you sure you want to delete this reservation?")){u(e=>({...e,[r]:!0}));try{const{error:n}=await v.from("top_notch_reservations").delete().eq("id",r);n?(console.error("Error deleting reservation:",n),alert("Failed to delete reservation. Please try again.")):(s(e=>e.filter(e=>e.id!==r)),i(r=>{const s="confirmed"===t.status?Math.max(0,r.confirmed-1):r.confirmed;return{confirmed:s,pending:Math.max(0,e.length-1-s)}}))}catch(n){console.error("Unexpected error deleting reservation:",n),alert("Unexpected error. See console.")}finally{u(e=>({...e,[r]:!1}))}}}else alert("Confirmed reservations cannot be deleted.")})(r.id),disabled:"confirmed"===r.status||!!h[r.id],className:b.deleteButton,children:h[r.id]?"Processing...":"confirmed"===r.status?"Locked":"Delete"})]})})]},r.id)),0===p.length&&t.jsx("tr",{children:t.jsx("td",{colSpan:"9",style:{textAlign:"center",padding:"1rem"},children:"No reservations found."})})]})]})})]})},C="_container_brtgf_17",S="_navContent_brtgf_67",k="_logoutButton_brtgf_167",B=()=>{const[e,s]=r.useState("dashboard"),a=n();return t.jsxs("div",{className:C,children:[t.jsxs("nav",{children:[t.jsxs("div",{className:S,children:[t.jsx("img",{src:"/Logo.jpg",alt:"Top Notch Logo"}),t.jsx("h2",{children:"Admin Panel"}),t.jsx("button",{onClick:()=>s("dashboard"),children:"Dashboard"})]}),t.jsxs("button",{className:k,onClick:()=>{window.confirm("Are you sure you want to log out?")&&a("/",{replace:!0})},children:["Log out",t.jsx("span",{children:t.jsx(c,{})})]})]}),t.jsxs("div",{children:[t.jsx("header",{children:t.jsx("h1",{children:"Welcome to the Admin Panel"})}),"dashboard"===e?t.jsx(w,{}):t.jsx("p",{children:"Please select an option from the menu"})]})]})};function I(){return t.jsx(a,{children:t.jsxs(o,{children:[t.jsx(i,{path:"/",element:t.jsx(g,{})}),t.jsx(i,{path:"/Admin",element:t.jsx(B,{})})]})})}s.createRoot(document.getElementById("root")).render(t.jsx(r.StrictMode,{children:t.jsx(I,{})}));export{e as __vite_legacy_guard};
